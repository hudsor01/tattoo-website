<!DOCTYPE html>
<html>
<head>
    <title>Customer Form Debug Test</title>
    <script>
        // Simple test to verify form data flow
        function testFormSubmission() {
            const formData = {
                firstName: 'John',
                lastName: 'Doe',
                email: 'john.doe@example.com',
                phone: '555-1234'
            };
            
            console.log('Test form data:', formData);
            
            // Simulate tRPC mutation call
            fetch('/api/trpc/admin.createCustomer?batch=1', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify([{
                    "0": {
                        "input": formData
                    }
                }])
            })
            .then(response => response.json())
            .then(data => {
                console.log('Response:', data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
        
        function testEmptySubmission() {
            console.log('Testing empty submission...');
            
            fetch('/api/trpc/admin.createCustomer?batch=1', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify([{
                    "0": {
                        "input": undefined
                    }
                }])
            })
            .then(response => response.json())
            .then(data => {
                console.log('Empty response:', data);
            })
            .catch(error => {
                console.error('Empty error:', error);
            });
        }
    </script>
</head>
<body>
    <h1>Customer Form Debug Test</h1>
    <button onclick="testFormSubmission()">Test Valid Form Submission</button>
    <button onclick="testEmptySubmission()">Test Empty Submission (Bug)</button>
    <p>Open browser console to see results</p>
</body>
</html>